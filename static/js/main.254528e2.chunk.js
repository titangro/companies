(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{30:function(e,a,t){e.exports=t(42)},40:function(e,a,t){},41:function(e,a,t){},42:function(e,a,t){"use strict";t.r(a);var n=t(0),r=t.n(n),o=t(11),l=t.n(o),c=t(13),s=t(21),i=t(12),u=t(5),p={error:null,loading:!1,companies:[],company:null,managers:[]},m={ERROR:"companies/app/error",ERROR_DELETE:"companies/app/error/delete",LOADED:"companies/app/loaded",LOADING:"companies/app/loading"},g={CREATE:"companies/companies/create",ACTIVATE:"companies/companies/activate",SHOW_MANAGERS:"companies/companies/managers/show",ADD_MANAGER:"companies/companies/managers/add"};var d=t(7);var h,E,f=Object(u.c)({loading:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:p.loading;switch((arguments.length>1?arguments[1]:void 0).type){case m.LOADING:return!0;case m.LOADED:return!1;default:return e}},error:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:p.error,a=arguments.length>1?arguments[1]:void 0;switch(a.type){case m.ERROR:return a.info?a.error+": "+a.info:a.error;case m.ERROR_DELETE:return null;default:return e}},companies:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:p.companies,a=arguments.length>1?arguments[1]:void 0;switch(a.type){case g.CREATE:return a.companies.suggestions;default:return e}},company:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:p.company,a=arguments.length>1?arguments[1]:void 0;switch(a.type){case g.ACTIVATE:return a.company;default:return e}},managers:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:p.managers,a=arguments.length>1?arguments[1]:void 0;switch(a.type){case g.SHOW_MANAGERS:var t=a.company,n=t.data.managers?t.data.managers:[],r=localStorage.managers?JSON.parse(localStorage.managers):[];return r=r[t.data.hid]?r[t.data.hid]:[],n=[].concat(Object(d.a)(n),Object(d.a)(r));case g.ADD_MANAGER:var o=a.manager,l=a.companyId;if(localStorage.managers){var c=JSON.parse(localStorage.managers);c[l]=[].concat(Object(d.a)(c[l]),[o]),localStorage.managers=JSON.stringify(c)}else{var s={};s[l]=[o],localStorage.managers=JSON.stringify(s)}return[].concat(Object(d.a)(e),[o]);default:return e}}});var v=s.__PRODUCTION__?function(e){return h||(h=Object(u.e)(f,e,Object(u.d)(Object(u.a)(i.a),"undefined"!==typeof window&&window.devToolsExtension?window.devToolsExtension():function(e){return e})))}:function(e){if(E)return E;var a=Object(u.e)(f,e,Object(u.d)(Object(u.a)(i.a),"undefined"!==typeof window&&window.devToolsExtension?window.devToolsExtension():function(e){return e}));return E=a},y=(t(39),t(40),t(41),t(22)),b=t(23),D=t(28),w=t(24),O=t(29),C=t(44),A=t(45),R=t(26),j=t(47),I=t(46);function S(e,a){return function(t){return t({type:m.ERROR,error:e,info:a})}}var x=function(e){function a(){return Object(y.a)(this,a),Object(D.a)(this,Object(w.a)(a).apply(this,arguments))}return Object(O.a)(a,e),Object(b.a)(a,[{key:"componentWillMount",value:function(){this.props.fetchData("https://suggestions.dadata.ru/suggestions/api/4_1/rs/suggest/party",{method:"POST",mode:"cors",credentials:"same-origin",headers:{"Content-Type":"application/json",Accept:"application/json",Authorization:"Token 6692478bebb2ef311e5137c8a7f03b26f98aeb72"},body:JSON.stringify({query:"\u0441\u0431\u0435\u0440\u0431\u0430\u043d\u043a"})})}},{key:"handleCompany",value:function(e,a){Array.from(e.target.parentElement.parentElement.parentElement.querySelectorAll("button")).forEach(function(e){return e.classList.remove("active")}),e.target.classList.add("active"),this.props.activateCompany(a),this.props.showManagers(a)}},{key:"handleSubmit",value:function(e,a){if(e.preventDefault(),this.validateForm(e.target)){console.log("isValid");var t=new FormData(e.target),n=t.get("name"),r=t.get("surname"),o=t.get("patronymic"),l=t.get("passport"),c=t.get("issue"),s=new Date(t.get("issue_date")),i=new Date(t.get("born_date")),u=t.get("inn");this.props.addManager(a,{name:"".concat(r," ").concat(n," ").concat(o),passport:l,issue:c,issueDate:s,bornDate:i,inn:u})}}},{key:"validateForm",value:function(e){var a=new FormData(e),t=a.get("name"),n=a.get("surname"),r=a.get("patronymic"),o=a.get("passport"),l=a.get("issue"),c=new Date(a.get("issue_date")),s=new Date(a.get("born_date")),i=a.get("inn");return""===t||""===n||""===r||""===o||""===l||""===c||""===s||""===i?(this.props.createError("\u0412\u0441\u0435 \u043f\u043e\u043b\u044f \u043e\u0431\u044f\u0437\u0430\u0442\u0435\u043b\u044c\u043d\u044b \u0434\u043b\u044f \u0437\u0430\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u044f"),!1):11!==o.length?(this.props.createError("\u041d\u0435\u043a\u043e\u0440\u0440\u0435\u043a\u0442\u043d\u043e \u0437\u0430\u043f\u043e\u043b\u0435\u043d\u043d\u043e \u043f\u043e\u043b\u0435 \u0441\u0435\u0440\u0438\u0438 \u0438 \u043d\u043e\u043c\u0435\u0440\u0430 \u043f\u0430\u0441\u043f\u043e\u0440\u0442\u0430"),!1):12!==i.length?(this.props.createError("\u041f\u043e\u043b\u0435 \u0418\u041d\u041d \u0434\u043e\u043b\u0436\u043d\u043e \u0441\u043e\u0434\u0435\u0440\u0436\u0430\u0442\u044c \u043d\u0435 \u043c\u0435\u043d\u0435\u0435 12 \u0446\u0438\u0444\u0440"),!1):c>new Date||s>c?(this.props.createError("\u041d\u0435\u043a\u043e\u0440\u0440\u0435\u043a\u0442\u043d\u043e \u0437\u0430\u043f\u043e\u043b\u0435\u043d\u043d\u043e \u043f\u043e\u043b\u0435 \u0434\u0430\u0442\u044b \u0432\u044b\u0434\u0430\u0447\u0438 \u043f\u0430\u0441\u043f\u043e\u0440\u0442\u0430"),!1):s>new Date?(this.props.createError("\u041d\u0435\u043a\u043e\u0440\u0440\u0435\u043a\u0442\u043d\u043e \u0437\u0430\u043f\u043e\u043b\u0435\u043d\u043d\u043e \u043f\u043e\u043b\u0435 \u0434\u0430\u0442\u044b \u0440\u043e\u0436\u0434\u0435\u043d\u0438\u044f"),!1):(new Date).getFullYear()-s.getFullYear()<18||(new Date).getFullYear()-s.getFullYear()===18&&(new Date).getMonth()-s.getMonth()<0||(new Date).getFullYear()-s.getFullYear()===18&&(new Date).getMonth()-s.getMonth()===0&&(new Date).getDate()-s.getDate()<0?(this.props.createError("\u0423\u0447\u0440\u0435\u0434\u0438\u0442\u0435\u043b\u044c \u043d\u0435 \u043c\u043e\u0436\u0435\u0442\u044c \u0431\u044b\u0442\u044c \u043d\u0435\u0441\u043e\u0432\u0435\u0440\u0448\u0435\u043d\u043d\u043e\u043b\u0435\u0442\u043d\u0438\u043c"),!1):(this.props.deleteError(),!0)}},{key:"handleFio",value:function(e){e.value=e.value.replace(/[^a-zA-Z\u0410-\u042f\u0430-\u044f\u0401\u0451]/gi,"").replace(/\s+/gi,", "),e.value=e.value?e.value[0].toUpperCase()+e.value.slice(1).toLowerCase():""}},{key:"handlePassportNumber",value:function(e){e.value.length<4?e.value=Object(d.a)(e.value.slice(0,4).replace(/[^0-9]/gim,"")).join(""):4===e.value.length?e.value=[].concat(Object(d.a)(e.value.slice(0,4).replace(/[^0-9]/gim,"")),[" "]).join(""):e.value=[].concat(Object(d.a)(e.value.slice(0,4).replace(/[^0-9]/gim,"")),[" "],Object(d.a)(e.value.slice(5,11).replace(/[^0-9]/gim,""))).join("")}},{key:"handlePassportIssue",value:function(e){e.value=e.value.replace(/[!@#~`$%^&";:?*\/\\\[\]\|\{\}.,_\+\=-]/g,"")}},{key:"handlePassportDate",value:function(e){}},{key:"handleBornDate",value:function(e){}},{key:"handleInn",value:function(e){e.value=e.value.replace(/[^0-9]/gim,"").slice(0,12)}},{key:"render",value:function(){var e=this;return console.log(this.props),r.a.createElement("div",{className:"wrapper"},this.props.companies.length?r.a.createElement(r.a.Fragment,null,r.a.createElement(C.a,{className:"choice"},r.a.createElement("h1",null,"\u0412\u044b\u0431\u0435\u0440\u0438\u0442\u0435 \u043a\u043e\u043c\u043f\u0430\u043d\u0438\u044e"),this.props.companies.map(function(a){return r.a.createElement(A.a,{key:a.data.inn},r.a.createElement(R.a,{xs:!0,lg:"6"},r.a.createElement(j.a,{variant:"light",onClick:function(t){return e.handleCompany(t,a)}},a.value)))})),this.props.company?r.a.createElement(r.a.Fragment,null,r.a.createElement(C.a,{className:"personal"},r.a.createElement("h2",null,"\u0423\u0447\u0440\u0435\u0434\u0438\u0442\u0435\u043b\u0438"),this.props.managers.length?r.a.createElement(r.a.Fragment,null,this.props.managers.map(function(e,a){return r.a.createElement(C.a,{key:a},r.a.createElement(A.a,null,r.a.createElement(R.a,{xs:!0,lg:"6"},e.name)),r.a.createElement(A.a,null,r.a.createElement(R.a,{xs:!0,lg:"6"},"\u0421\u0435\u0440\u0438\u044f \u043d\u043e\u043c\u0435\u0440 \u043f\u0430\u0441\u043f\u043e\u0440\u0442\u0430: ",e.passport),r.a.createElement(R.a,{xs:!0,lg:"6"},"\u041a\u0435\u043c \u0432\u044b\u0434\u0430\u043d: ",e.issue),r.a.createElement(R.a,{xs:!0,lg:"6"},"\u0414\u0430\u0442\u0430 \u0432\u044b\u0434\u0430\u0447\u0438: ",new Date(e.issueDate).toLocaleDateString())),r.a.createElement(A.a,null,r.a.createElement(R.a,{xs:!0,lg:"2"},"\u0414\u0430\u0442\u0430 \u0440\u043e\u0436\u0434\u0435\u043d\u0438\u044f: ",new Date(e.bornDate).toLocaleDateString())),r.a.createElement(A.a,null,r.a.createElement(R.a,{xs:!0,lg:"6"},"\u0418\u041d\u041d: ",e.inn)))})):r.a.createElement("p",null,"\u0412 \u043a\u043e\u043c\u043f\u0430\u043d\u0438\u0438 \u043d\u0435\u0442 \u0438\u043d\u0444\u043e\u0440\u043c\u0430\u0446\u0438\u0438 \u043e\u0431 \u0443\u0447\u0440\u0435\u0434\u0438\u0442\u0435\u043b\u044f\u0445")),r.a.createElement(C.a,{className:"personal"},r.a.createElement(A.a,null,r.a.createElement(R.a,{xs:!0,lg:"6"},r.a.createElement("h2",null,"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u0438\u043d\u0444\u043e\u0440\u043c\u0430\u043c\u0446\u0438\u044e \u043e \u0443\u0447\u0435\u0440\u0435\u0434\u0438\u0442\u0435\u043b\u044f\u0445"),r.a.createElement(I.a,{onSubmit:function(a){return e.handleSubmit(a,e.props.company.data.hid)}},r.a.createElement(I.a.Group,{controlId:"formBasicCompany"},r.a.createElement(I.a.Label,null,"\u041a\u043e\u043c\u043f\u0430\u043d\u0438\u044f"),r.a.createElement(I.a.Control,{type:"text",name:"company",placeholder:"\u0412\u0430\u0448\u0430 \u043a\u043e\u043c\u043f\u0430\u043d\u0438\u044f",value:this.props.company.value,onChange:function(){}}),r.a.createElement(I.a.Text,{className:"text-muted"},"\u0412\u044b\u0431\u0440\u0430\u043d\u043d\u0430\u044f \u043a\u043e\u043c\u043f\u0430\u043d\u0438\u044f")),r.a.createElement(I.a.Group,{controlId:"formBasicSurname"},r.a.createElement(I.a.Label,null,"\u0424\u0430\u043c\u0438\u043b\u0438\u044f \u0418\u043c\u044f \u041e\u0442\u0447\u0435\u0441\u0442\u0432\u043e"),r.a.createElement(I.a.Control,{type:"text",name:"surname",placeholder:"\u0424\u0430\u043c\u0438\u043b\u0438\u044f",onChange:function(a){return e.handleFio(a.target)}})),r.a.createElement(I.a.Group,{controlId:"formBasicName"},r.a.createElement(I.a.Control,{type:"text",name:"name",placeholder:"\u0418\u043c\u044f",onChange:function(a){return e.handleFio(a.target)}})),r.a.createElement(I.a.Group,{controlId:"formBasicPatronymic"},r.a.createElement(I.a.Control,{type:"text",name:"patronymic",placeholder:"\u041e\u0442\u0447\u0435\u0441\u0442\u0432\u043e",onChange:function(a){return e.handleFio(a.target)}})),r.a.createElement(I.a.Group,{controlId:"formBasicPassport"},r.a.createElement(I.a.Label,null,"\u041f\u0430\u0441\u043f\u043e\u0440\u0442\u043d\u044b\u0435 \u0434\u0430\u043d\u043d\u044b\u0435"),r.a.createElement(I.a.Control,{type:"text",name:"passport",placeholder:"\u0421\u0435\u0440\u0438\u044f \u0438 \u043d\u043e\u043c\u0435\u0440",onChange:function(a){return e.handlePassportNumber(a.target)}})),r.a.createElement(I.a.Group,{controlId:"formBasicPassportIssue"},r.a.createElement(I.a.Control,{type:"text",name:"issue",placeholder:"\u041a\u0435\u043c \u0432\u044b\u0434\u0430\u043d",onChange:function(a){return e.handlePassportIssue(a.target)}})),r.a.createElement(I.a.Group,{controlId:"formBasicPassportDateIssue"},r.a.createElement(I.a.Control,{type:"date",name:"issue_date",placeholder:"\u0414\u0430\u0442\u044b \u0432\u044b\u0434\u0430\u0447\u0438",onChange:function(a){return e.handlePassportDate(a.target)}}),r.a.createElement(I.a.Text,{className:"text-muted"},"\u0414\u0430\u0442\u044b \u0432\u044b\u0434\u0430\u0447\u0438")),r.a.createElement(I.a.Group,{controlId:"formBasicPassport"},r.a.createElement(I.a.Label,null,"\u0414\u0430\u0442\u0430 \u0440\u043e\u0436\u0434\u0435\u043d\u0438\u044f"),r.a.createElement(I.a.Control,{type:"date",name:"born_date",placeholder:"",onChange:function(a){return e.handleBornDate(a.target)}})),r.a.createElement(I.a.Group,{controlId:"formBasicPassport"},r.a.createElement(I.a.Label,null,"\u0418\u041d\u041d"),r.a.createElement(I.a.Control,{type:"text",name:"inn",placeholder:"",onChange:function(a){return e.handleInn(a.target)}})),r.a.createElement(I.a.Group,{controlId:"formBasicError"},r.a.createElement(I.a.Control.Feedback,{type:"invalid",style:{display:this.props.error?"block":"none"}},this.props.error)),r.a.createElement(j.a,{variant:"primary",type:"submit"},"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u0443\u0447\u0440\u0435\u0434\u0438\u0442\u0435\u043b\u044f")))))):""):"")}}]),a}(n.Component),N=Object(c.b)(function(e){return{error:e.error,loading:e.loading,companies:e.companies,company:e.company,managers:e.managers}},function(e){return{fetchData:function(a,t){return e(function(e,a){return function(t){return fetch(e,a).then(function(e){return e.json()}).then(function(e){t({type:g.CREATE,companies:e})}).catch(function(e){return t(S(e))})}}(a,t))},activateCompany:function(a){return e(function(e){return function(a){return a({type:g.ACTIVATE,company:e})}}(a))},createError:function(a,t){return e(S(a,t))},deleteError:function(){return e(function(e){return e({type:m.ERROR_DELETE})})},showManagers:function(a){return e(function(e){return function(a){return a({type:g.SHOW_MANAGERS,company:e})}}(a))},addManager:function(a,t){return e(function(e,a){return function(t){return t({type:g.ADD_MANAGER,manager:a,companyId:e})}}(a,t))}}})(x),T=v(p);l.a.render(r.a.createElement(c.a,{store:T},r.a.createElement(N,null)),document.getElementById("root"))}},[[30,1,2]]]);
//# sourceMappingURL=main.254528e2.chunk.js.map